<?xml version="1.0" encoding="UTF-8"?>

<section xml:id="sec-pivot" xmlns:xi="http://www.w3.org/2001/XInclude">
  <title>Canonical Problems and the Simplex Pivot</title>

  <introduction>
    <p>
      In this section, we use our geometric intuition to develop an algebraic operation called a <term>simplex pivot</term>,
      which will be the key operation in solving linear optimization problems.  We give both a geometric and algebraic understanding
      of this operation.
    </p>
  </introduction>

  <activity xml:id="activity-maxslack">
    <introduction>
      <p>
        Consider the canonical maximization problem:

      </p>
      <p>
        <md>
          <mrow>\textbf{Maximize: }f(\mathbf{x})  = c_1x_1 + c_2x_2 +\cdots c_mx_m-d \amp= \left(\displaystyle\sum_{j=1}^m c_jx_j \right)-d</mrow>
          <mrow>\textbf{subject to: }   a_{11}x_1 + a_{12}x_2 +\cdots a_{1m}x_m\amp \leq  b_1</mrow>
          <mrow> a_{21}x_1 + a_{22}x_2 +\cdots a_{2m}x_m\amp \leq  b_2</mrow>
          <mrow> \vdots \amp   \vdots</mrow>
          <mrow> a_{n1}x_1 + a_{n2}x_2 +\cdots a_{nm}x_m\amp \leq  b_n</mrow>
          <mrow> x_1, x_2, \ldots, x_m\amp \geq  0</mrow>
        </md>
      </p>
      <p>
        <idx>slack variable</idx>
        <idx>decision variable</idx>
        <idx>variable, slack</idx>
        <idx>variable, decision</idx>
        Note that we may rewrite this as a system of equalities by introducing the <term>slack variables</term> <m>t_i</m>. 
        We will refer to the <m>x_j</m> as <term>decision variables</term>. 
      </p>

      <p>
        <md>
          <mrow>\textbf{Maximize: }  f(\mathbf{x}) = c_1x_1 + c_2x_2 +\cdots c_mx_m-d \amp= \left(\displaystyle\sum_{j=1}^m c_jx_j \right)-d</mrow>
          <mrow>\textbf{subject to: }  a_{11}x_1 + a_{12}x_2 +\cdots a_{1m}x_m + t_1 \amp =  b_1</mrow>
          <mrow> a_{21}x_1 + a_{22}x_2 +\cdots a_{2m}x_m+t_2\amp =  b_2</mrow>
          <mrow> \vdots \amp   \vdots</mrow>
          <mrow> a_{n1}x_1 + a_{n2}x_2 +\cdots a_{nm}x_m +t_n \amp =  b_n</mrow>
          <mrow> x_1, x_2, \ldots, x_m\amp \geq  0.</mrow>
        </md>
        
      </p>
      
      
    </introduction>
    <task>
      <statement>
        <p>
          
          What must be true about the slack variables <m>t_i</m>?
        </p>
        <!--
        TYPO
        punctuation needed below
        fixed
        -->
        <ol marker="A.">
          <li>
            <p>
              <m>t_i\leq 0.</m>
            </p>
          </li>
          <li>
            <p>
              <m>t_i\geq 0.</m>
            </p>
          </li>
          <li>
            <p>
              <m>\sum_{i=1}^m t_i=0.</m>
            </p>
          </li>
        </ol>
      </statement>
    </task>

    <task>
      <statement>
        <p>
          Which of these <em>must</em> be an upper bound for <m>t_i</m>?
        </p>
        <ol style="A">
          <li>
            <p>
              <m>b_i.</m>
            </p>
          </li>
          <li>
            <p>
              <m>c_i.</m>
            </p>
          </li>
          <li>
            <p>
              <m>x_i.</m>
            </p>
          </li>
          <li>
            <p>
              <m>t_i</m> could be unbounded.
            </p>
            <!-- 
            TYPO
            should be could be unbounded
            Fixed
            -->
          </li>
        </ol>
      </statement>
    </task>

  </activity>

  <observation>
    <statement>
      <p>
        Similarly the canonical minimization problem is:
      </p>
      <p>
        <md>
          <mrow>\textbf{Minimize: }g(\mathbf{x})  = c_1x_1 + c_2x_2 +\cdots c_mx_m-d \amp= \left(\displaystyle\sum_{j=1}^m c_jx_j \right)-d</mrow>
          <mrow>\textbf{subject to: }   a_{11}x_1 + a_{12}x_2 +\cdots a_{1m}x_m\amp \geq  b_1</mrow>
          <mrow> a_{21}x_1 + a_{22}x_2 +\cdots a_{2m}x_m\amp \geq  b_2</mrow>
          <mrow> \vdots \amp   \vdots</mrow>
          <mrow> a_{n1}x_1 + a_{n2}x_2 +\cdots a_{nm}x_m\amp \geq  b_n</mrow>
          <mrow> x_1, x_2, \ldots, x_m\amp \geq  0</mrow>
        </md>
        where <m>a_{i,j}, b_i, c_j, d\in \mathbb{R}</m>.  This problem may be rewritten as:
      </p>
      <p>
        <md>
          <mrow>\textbf{Minimize: }  g(\mathbf{x}) = c_1x_1 + c_2x_2 +\cdots c_mx_m-d \amp= \left(\displaystyle\sum_{j=1}^m c_jx_j \right)-d</mrow>
          <mrow>\textbf{subject to: }  a_{11}x_1 + a_{12}x_2 +\cdots a_{1m}x_m -s_1\amp =  b_1</mrow>
          <mrow> a_{21}x_1 + a_{22}x_2 +\cdots a_{2m}x_m -s_2 \amp =  b_2</mrow>
          <mrow> \vdots \amp   \vdots</mrow>
          <mrow> a_{n1}x_1 + a_{n2}x_2 +\cdots a_{nm}x_m -s_n \amp =  b_n</mrow>
          <mrow> x_1, x_2, \ldots, x_m\amp \geq  0.</mrow>
        </md>
      </p>
      <p>
        
       In this case, we refer to the <m>s_j</m> as the  <term>slack variables</term>,
       and the <m>x_i</m> as <term>decision variables</term>. 
      </p>
    </statement>
  </observation>

  <p>
    As usual, we focus on maximization for now.
  </p>

  <definition xml:id="def-tuckertableau">
    <idx>Tucker tableau</idx>
    <idx>slack variable</idx>
    <idx>basic variable</idx>
    <idx>decision variable</idx>
    <idx>independent variable</idx>
    <idx>tableau, Tucker</idx>
    <idx>variable, slack</idx>
    <idx>variable, basic</idx>
    <idx>variable, decision</idx>
    <idx>variable, independent</idx>
    <idx>basic solution</idx>
    <idx>solution, basic</idx>
    <statement>
      <p>
        We can rewrite
        <md>
          <mrow>\textbf{Maximize: }  f(\mathbf{x}) = c_1x_1 + c_2x_2 +\cdots c_mx_m-d \amp= \left(\displaystyle\sum_{j=1}^m c_jx_j \right)-d</mrow>
          <mrow>\textbf{subject to: }  a_{1,1}x_1 + a_{1,2}x_2 +\cdots a_{1,m}x_m + t_1 \amp =  b_1</mrow>
          <mrow> a_{21}x_1 + a_{22}x_2 +\cdots a_{2m}x_m+t_2\amp =  b_2</mrow>
          <mrow> \vdots \amp   \vdots</mrow>
          <mrow> a_{n1}x_1 + a_{n2}x_2 +\cdots a_{nm}x_m +t_n \amp =  b_n</mrow>
          <mrow> x_1, x_2, \ldots, x_m\amp \geq  0</mrow>
        </md>
        as 
        <md>
          <mrow>\textbf{Maximize: }  f(\mathbf{x}) = c_1x_1 + c_2x_2 +\cdots c_mx_m-d \amp= \left(\displaystyle\sum_{j=1}^m c_jx_j \right)-d</mrow>
          <mrow>\textbf{subject to: }  a_{11}x_1 + a_{12}x_2 +\cdots a_{1m}x_m  -b_1\amp =  -t_1</mrow>
          <mrow> a_{21}x_1 + a_{22}x_2 +\cdots a_{2n}x_m-b_2\amp =  -t_2</mrow>
          <mrow> \vdots \amp   \vdots</mrow>
          <mrow> a_{n1}x_1 + a_{n2}x_2 +\cdots a_{nm}x_m -b_n \amp =  -t_n</mrow>
          <mrow> x_1, x_2, \ldots, x_m, t_1, \ldots, t_n\amp \geq  0</mrow>
        </md>
        Which may be recorded by the <term>Tucker tableau</term>:
        
      </p>
      <p>
        <tabular halign="center">
          <row>
            <cell halign="left">
            </cell>
            <cell bottom="medium">
              <m>x_1</m>
            </cell>
            <cell bottom="medium">
              <m>x_2</m>
            </cell>
            <cell bottom="medium">
              <m>\cdots</m>
            </cell>
            <cell bottom="medium">
              <m>x_m</m>
            </cell>
            <cell bottom="medium">
              <m>-1</m>
            </cell>
            <cell halign="left">
            </cell>
          </row>
          <row>
            <cell halign="left" right="medium">
            </cell>
            <cell>
              <m>a_{11}</m>
            </cell>
            <cell>
              <m>a_{12}</m>
            </cell>
            <cell>
              <m>\cdots</m>
            </cell>
            <cell right="medium">
              <m>a_{1m}</m>
            </cell>
            <cell right="medium">
              <m>b_1</m>
            </cell>
            <cell halign="left">
              <m>=-t_1</m>
            </cell>
          </row>
          <row>
            <cell halign="left" right="medium">
            </cell>
            <cell>
              <m>a_{21}</m>
            </cell>
            <cell>
              <m>a_{22}</m>
            </cell>
            <cell>
              <m>\cdots</m>
            </cell>
            <cell right="medium">
              <m>a_{2m}</m>
            </cell>
            <cell right="medium">
              <m>b_2</m>
            </cell>
            <cell halign="left">
              <m>=-t_2</m>
            </cell>
          </row>
          <row>
            <cell halign="left" right="medium">
            </cell>
            <cell>
              <m>\vdots</m>
            </cell>
            <cell>
              <m>\vdots</m>
            </cell>
            <cell>
              <m>\ddots</m>
            </cell>
            <cell right="medium">
              <m>\vdots</m>
            </cell>
            <cell right="medium">
              <m>\vdots</m>
            </cell>
            <cell halign="left">
              <m>\vdots</m>
            </cell>
          </row>
          
          <row>
            <cell halign="left" right="medium">
            </cell>
            <cell bottom="medium">
              <m>a_{n1}</m>
            </cell>
            <cell bottom="medium">
              <m>a_{n2}</m>
            </cell>
            <cell bottom="medium">
              <m>\cdots</m>
            </cell>
            <cell right="medium" bottom="medium">
              <m>a_{nm}</m>
            </cell>
            <cell right="medium" bottom="medium">
              <m>b_n</m>
            </cell>
            <cell halign="left">
              <m>=-t_n</m>
            </cell>
          </row>
          <row>
            <cell halign="left" right="medium">
            </cell>
            <cell bottom="medium">
              <m>c_1</m>
            </cell>
            <cell bottom="medium">
              <m>c_2</m>
            </cell>
            <cell bottom="medium">
              <m>\cdots</m>
            </cell>
            <cell right="medium" bottom="medium">
              <m>c_m</m>
            </cell>
            <cell right="medium" bottom="medium">
              <m>d</m>
            </cell>
            <cell halign="left">
            </cell>
          </row>
        </tabular>
      </p>
      <p>
        The variables at the top are called the <term>decision variables</term> or <term>independent variables</term>, the variables on the side are the <term>slack variables</term> or <term>basic variables</term>.
      </p>
      <p>
        The <term>basic solution</term> recorded by a Tucker tableau is the solution where each decision variable has
        the value zero.
      </p>
    </statement>
  </definition>

  <observation>
    <statement>
      <p>
        Note that this tableau records a basic solution <m>x_1, x_2, \ldots, x_m=0</m>.  We will further explore what this means in a bit.  
        But for now, if <m>x_1, x_2, \ldots, x_m =0</m>, then:
        <md>
          <mrow>a_{11}0 + a_{12}0 +\cdots a_{1m}0-b_1  \amp =  -t_1</mrow>
          <mrow> a_{21}0 + a_{22}0 +\cdots a_{2m}0 -b_2\amp =  -t_2</mrow>
          <mrow> \vdots \amp   \vdots</mrow>
          <mrow> a_{n1}0 + a_{n2}0 +\cdots a_{nm}0-b_n  \amp =  -t_n</mrow>
          <mrow> c_10 + c_20 +\cdots c_m0-d  \amp =  f.</mrow>
        </md>
      </p>
    </statement>
  </observation>

  <activity>
    <introduction>
      <p>
        Consider the region in <m>\mathbb{R}^2</m> bound by <m>3x+5y\leq 8, 2x+y\leq 3</m> and <m>x,y\geq 0</m>.  Let <m>3x+5y-8=-t_1</m> and <m>2x+y-3=-t_2.</m>
        <image xml:id="slackzero" width="80%">
          <description>The feasible region for a canonical maximization problem.</description>
          <latex-image>
            \begin{tikzpicture}[scale=2.5]
            \draw[fill, blue, opacity=0.4] (0,0) -- (0,1.6) -- (1, 1) -- (1.5,0)  -- (0,0);
            \draw[very thick,->] (-0.2,0) -- (2,0);
            \draw[very thick,->] (0,-0.2) -- (0,2);
            \draw[black, thick] (0,0) -- (0,1.6) -- (1, 1) -- (1.5,0)  -- (0,0);   
            \draw[teal, dashed, thick] (0,1.6) --node[above, sloped, pos= 0.2]{\tiny $3x+5y=8$} (2, 0.4);          
            \draw[orange, dashed, thick] (0.5,2) --node[above, sloped, pos= 0.8]{\tiny $2x+y=3$} (1.5, 0);
            \draw[ fill] (0,0) node[below left]{\tiny $(0,0)$} circle (1pt); 
            \draw[ fill] (0,1.6) node[ left]{\tiny $(0,1.6)$} circle (1pt); 
            \draw[ fill] (1.5,0) node[ below ]{\tiny $(1.5,0)$} circle (1pt); 
            \draw[ fill] (1,1) node[ above right]{\tiny $(1,1)$} circle (1pt); 
        
            \end{tikzpicture}
  
            </latex-image>
        </image> 
      </p>
    </introduction>
    <task>
      <statement>
        <p>
          If <m>t_1=0</m>, what point(s) in <m>\mathbb{R}^2</m> satisfy <m>3x+5y-8=-t_1</m>?
        </p>
      </statement>
    </task>
    <task>
      <statement>
        <p>
          If <m>t_2=0</m>, what point(s) in <m>\mathbb{R}^2</m> satisfy <m>2x+y-3=-t_2</m>?
        </p>
      </statement>
    </task>
    <task>
      <statement>
        <p>
          What point(s) in <m>\mathbb{R}^2</m> satisfy both <m>t_1=0, t_2=0</m>?
        </p>
      </statement>
    </task>
    <task>
      <statement>
        <p>
          What point(s) in <m>\mathbb{R}^2</m> satisfy both <m>t_1=8, t_2=3</m>?
        </p>
      </statement>
      
    </task>

    <task>
      <statement>
        <p>
          What point(s) in <m>\mathbb{R}^2</m> satisfy both <m>t_1=0, x=0</m>?  What about <m>t_2=0, y=0</m>?
        </p>
      </statement>
    </task>
    <task>
      <statement>
        <p>
          Consider the interactive below.  Drag around the point <m>(x,y)</m>. For each variable <m>x, y, t_1, t_2</m>, when are they 
          positive? Negative? Equal to zero?
        </p>
           <interactive  platform="doenetml" width="100%" >
            <slate surface="doenetml">
              <xi:include parse="text" href="doenet/simplex-slack.xml"/>
            </slate>
          </interactive>
      </statement>
    </task>
    
  </activity>

  <activity xml:id="activity-widget">
    <introduction>
      <p>
        Suppose a company produces two types of widgets.  
        Widget 1 sells for $200 and Widget 2 sells for $150. Each widget takes ingredients A, B and C.  Widget 1 needs 1 unit of A, 2 units of B and 2 units of C.  Widget 2 needs 2 units of A, 2 units of B and 1 unit of C.
        The company has 20 units of ingredient A, 30 units of B and 25 units of C.
      </p>
    </introduction>
    <task>
      <statement>
        <p>
          Set up the canonical maximization problem for the information given above and record it in the following tableau:
          
        </p>
        <p>
          <tabular halign="center">
            <row>
              <cell halign="left">
              </cell>
              <cell bottom="medium">
                <m>x_1</m>
              </cell>
              <cell bottom="medium">
                <m>x_2</m>
              </cell>
              <cell bottom="medium">
                <m>-1</m>
              </cell>
              <cell halign="left">
              </cell>
            </row>
            <row>
              <cell halign="left" right="medium">
              </cell>
              <cell>
                <m>?</m>
              </cell>
              <cell right="medium">
                <m>?</m>
              </cell>
              <cell right="medium">
                <m>?</m>
              </cell>
              <cell halign="left">
                <m>=-t_A</m>
              </cell>
            </row>
            <row>
              <cell halign="left" right="medium">
              </cell>
              <cell>
                <m>?</m>
              </cell>
              <cell right="medium">
                <m>?</m>
              </cell>
              <cell right="medium">
                <m>?</m>
              </cell>
              <cell halign="left">
                <m>=-t_B</m>
              </cell>
            </row>
            <row>
              <cell halign="left" right="medium">
              </cell>
              <cell bottom="medium">
                <m>?</m>
              </cell>
              <cell right="medium" bottom="medium">
                <m>?</m>
              </cell>
              <cell right="medium" bottom="medium">
                <m>?</m>
              </cell>
              <cell halign="left">
                <m>=-t_C</m>
              </cell>
            </row>
            <row>
              <cell halign="left" right="medium">
              </cell>
              <cell bottom="medium">
                <m>?</m>
              </cell>
              <cell right="medium" bottom="medium">
                <m>?</m>
              </cell>
              <cell right="medium" bottom="medium">
                <m>?</m>
              </cell>
              <cell halign="left">
                <m>=f</m>
              </cell>
            </row>
          </tabular>
        </p>
      </statement>
    </task>
    <task>
      <statement>
        <p>
          Recall that this tableau has a basic solution where  <m>x_1</m> and <m> x_2=0</m>.  If we slightly increase <m>x_1</m> and <m>x_2</m>, do we increase <m>f</m>?
        </p>
      </statement>
    </task>
    <task>
      <statement>
        <p>
          Let's increase <m>x_1</m>.  Consider the row corresponding to <m>t_C</m>.  Take the associated equality and solve for <m>x_1</m> in terms of <m>x_2</m> and <m> t_C</m>.
          Then, for each equality associated with the rows corresponding to <m>t_A, t_B, f</m>, replace <m>x_1</m> with the value you found above and rewrite the left hand sides.
        </p>
      </statement>
    </task>

    <task>
      <statement>
        <p>
          Record this new system in the following tableau:
          
        </p>
        <p>
          <tabular halign="center">
            <row>
              <cell halign="left">
              </cell>
              <cell bottom="medium">
                <m>t_C</m>
              </cell>
              <cell bottom="medium">
                <m>x_2</m>
              </cell>
              <cell bottom="medium">
                <m>-1</m>
              </cell>
              <cell halign="left">
              </cell>
            </row>
            <row>
              <cell halign="left" right="medium">
              </cell>
              <cell>
                <m>?</m>
              </cell>
              <cell right="medium">
                <m>?</m>
              </cell>
              <cell right="medium">
                <m>?</m>
              </cell>
              <cell halign="left">
                <m>=-t_A</m>
              </cell>
            </row>
            <row>
              <cell halign="left" right="medium">
              </cell>
              <cell>
                <m>?</m>
              </cell>
              <cell right="medium">
                <m>?</m>
              </cell>
              <cell right="medium">
                <m>?</m>
              </cell>
              <cell halign="left">
                <m>=-t_B</m>
              </cell>
            </row>
            <row>
              <cell halign="left" right="medium">
              </cell>
              <cell bottom="medium">
                <m>?</m>
              </cell>
              <cell right="medium" bottom="medium">
                <m>?</m>
              </cell>
              <cell right="medium" bottom="medium">
                <m>?</m>
              </cell>
              <cell halign="left">
                <m>=-x_1</m>
              </cell>
            </row>
            <row>
              <cell halign="left" right="medium">
              </cell>
              <cell bottom="medium">
                <m>?</m>
              </cell>
              <cell right="medium" bottom="medium">
                <m>?</m>
              </cell>
              <cell right="medium" bottom="medium">
                <m>?</m>
              </cell>
              <cell halign="left">
                <m>=f</m>
              </cell>
            </row>
          </tabular>
        </p>
      </statement>
    </task>
    <task>
      <statement>
        <p>
          Recall that this new tableau has a basic solution where <m>t_C</m> and <m> x_2=0</m>.  What is <m>x_1</m>?  Where in <m>\R^2</m> is this solution?
        </p>
      </statement>
    </task>
    <task>
      <statement>
        <p>
          If we increase <m>t_C</m> from 0, do we increase <m>f</m>?  What about increasing <m>x_2</m>?
        </p>
      </statement>
    </task>
    <task>
      <statement>
        <p>
          Let's increase <m>x_2</m>.  Take the row corresponding to <m>t_B</m> and repeat Tasks <m>\textbf{(c)}</m> and <m>\textbf{(d)}</m> to obtain a tableau of the form:
          
        </p>
        <p>
          <tabular halign="center">
            <row>
              <cell halign="left">
              </cell>
              <cell bottom="medium">
                <m>t_C</m>
              </cell>
              <cell bottom="medium">
                <m>t_B</m>
              </cell>
              <cell bottom="medium">
                <m>-1</m>
              </cell>
              <cell halign="left">
              </cell>
            </row>
            <row>
              <cell halign="left" right="medium">
              </cell>
              <cell>
                <m>?</m>
              </cell>
              <cell right="medium">
                <m>?</m>
              </cell>
              <cell right="medium">
                <m>?</m>
              </cell>
              <cell halign="left">
                <m>=-t_A</m>
              </cell>
            </row>
            <row>
              <cell halign="left" right="medium">
              </cell>
              <cell>
                <m>?</m>
              </cell>
              <cell right="medium">
                <m>?</m>
              </cell>
              <cell right="medium">
                <m>?</m>
              </cell>
              <cell halign="left">
                <m>=-x_2</m>
              </cell>
            </row>
            <row>
              <cell halign="left" right="medium">
              </cell>
              <cell bottom="medium">
                <m>?</m>
              </cell>
              <cell right="medium" bottom="medium">
                <m>?</m>
              </cell>
              <cell right="medium" bottom="medium">
                <m>?</m>
              </cell>
              <cell halign="left">
                <m>=-x_1</m>
              </cell>
            </row>
            <row>
              <cell halign="left" right="medium">
              </cell>
              <cell bottom="medium">
                <m>?</m>
              </cell>
              <cell right="medium" bottom="medium">
                <m>?</m>
              </cell>
              <cell right="medium" bottom="medium">
                <m>?</m>
              </cell>
              <cell halign="left">
                <m>=f</m>
              </cell>
            </row>
          </tabular>
        </p>
      </statement>
    </task>
    <task>
      <statement>
        <p>
          What point in <m>\R^2</m> represents the basic solution for this new tableau?
        </p>
      </statement>
    </task>
    <task>
      <statement>
        <p>
          If we increase <m>t_C</m> from 0, do we increase <m>f</m>?  What about <m>t_B</m>?
        </p>
      </statement>
    </task>

    <task>
      <statement>
        <p>
          Consider the plot of the feasible region for this problem.  What exactly, geometrically, did we end up doing in this activity?
        </p>
        <p>
          <interactive  platform="doenetml" width="100%" >
            <slate surface="doenetml">
              <xi:include parse="text" href="doenet/simplex-bounds.xml"/>
            </slate>
          </interactive>
        </p>
      </statement>
      
    </task>


  </activity>

  <activity>
    <statement>
      <!-- 
          TYPO
          Maybe should be sufficient?
          Fixed
      -->
      <p>
        Based on <xref ref="activity-widget"/>, what would be a reasonable sufficient condition for a feasible tableau to record a basic optimal solution?
      </p>
      <ol marker="A." cols="2">
        <li>
          <p>
            Some of the <m>c_j\leq 0</m>.
          </p>
        </li>
        <li>
          <p>
            All of the <m>c_j\leq 0</m>.
          </p>
        </li>
        <li>
          <p>
            Some of the <m>c_j\geq 0</m>.
          </p>
        </li>
        <li>
          <p>
            All of the <m>c_j\geq 0</m>.
          </p>
        </li>

        <li>
          <p>
            Some of the <m>b_i\leq 0</m>.
          </p>
        </li>
        <li>
          <p>
            All of the <m>b_i\leq 0</m>.
          </p>
        </li>
        <li>
          <p>
            Some of the <m>b_i\geq 0</m>.
          </p>
        </li>
        <li>
          <p>
            All of the <m>b_i\geq 0</m>.
          </p>
        </li>
      </ol>
    </statement>
  </activity>

  <activity>
    <introduction>
      <p>
        Consider the tableau:
        
         
      </p>
      <p>
        <tabular halign="center">
          <row>
            <cell halign="left">
            </cell>
            <cell bottom="medium">
              <m>x_1</m>
            </cell>
            <cell bottom="medium">
              <m>x_2</m>
            </cell>
            <cell bottom="medium">
              <m>-1</m>
            </cell>
            <cell halign="left">
            </cell>
          </row>
          <row>
            <cell halign="left" right="medium">
            </cell>
            <cell>
              <m> a_{11}</m>
            </cell>
            <cell right="medium">
              <m> a_{12}</m>
            </cell>
            <cell right="medium">
              <m> b_1</m>
            </cell>
            <cell halign="left">
              <m>=-t_1</m>
            </cell>
          </row>
          <row>
            <cell halign="left" right="medium">
            </cell>
            <cell bottom="medium">
              <m> a_{21}</m>
            </cell>
            <cell right="medium" bottom="medium">
              <m> a_{22}</m>
            </cell>
            <cell right="medium" bottom="medium">
              <m> b_2</m>
            </cell>
            <cell halign="left">
              <m>=-t_2</m>
            </cell>
          </row>
          <row>
            <cell halign="left" right="medium">
            </cell>
            <cell bottom="medium">
              <m> c_1</m>
            </cell>
            <cell right="medium" bottom="medium">
              <m> c_2</m>
            </cell>
            <cell right="medium" bottom="medium">
              <m> d</m>
            </cell>
            <cell halign="left">
              <m>=f</m>
            </cell>
          </row>
        </tabular>
      </p>
      <p>
        along with the corresponding system of equations.
      </p>
    </introduction>
    <task>
      <statement>
        <p>
          Solve for <m>x_1</m> in terms of <m>t_1</m> and <m> x_2</m>.
        </p>
      </statement>
    </task>
    <task>
      <statement>
        <p>
          In each of the other two equalities, replace <m>x_1</m> with the expression we found above and simplify.
        </p>
      </statement>
    </task>
    <task>
      <statement>
        <p>
          Record this new system in the following tableau:
          
        </p>
        <p>
          <tabular halign="center">
            <row>
              <cell halign="left">
              </cell>
              <cell bottom="medium">
                <m>t_1</m>
              </cell>
              <cell bottom="medium">
                <m>x_2</m>
              </cell>
              <cell bottom="medium">
                <m>-1</m>
              </cell>
              <cell halign="left">
              </cell>
            </row>
            <row>
              <cell halign="left" right="medium">
              </cell>
              <cell>
                <m> ?</m>
              </cell>
              <cell right="medium">
                <m>  ?</m>
              </cell>
              <cell right="medium">
                <m> ?</m>
              </cell>
              <cell halign="left">
                <m>=-x_1</m>
              </cell>
            </row>
            <row>
              <cell halign="left" right="medium">
              </cell>
              <cell bottom="medium">
                <m>  ?</m>
              </cell>
              <cell right="medium" bottom="medium">
                <m> ?</m>
              </cell>
              <cell right="medium" bottom="medium">
                <m> ?</m>
              </cell>
              <cell halign="left">
                <m>=-t_2</m>
              </cell>
            </row>
            <row>
              <cell halign="left" right="medium">
              </cell>
              <cell bottom="medium">
                <m>  ?</m>
              </cell>
              <cell right="medium" bottom="medium">
                <m>  ?</m>
              </cell>
              <cell right="medium" bottom="medium">
                <m> ?</m>
              </cell>
              <cell halign="left">
                <m>=f</m>
              </cell>
            </row>
          </tabular>
        </p>
      </statement>
    </task>
  </activity>

  <definition xml:id="def-pivot">
    <idx>pivot</idx>
    <statement>
      <p>
        The following is the procedure for a <term>pivot transformation</term>:

      </p>
      <ol>
        <li>
          <p>
            Pick a nonzero entry <m>p</m> in the tableau but not in the objective row or constraint column.
          </p>
        </li>
        <li>
          <p>
            Transpose the decision and slack variables corresponding to the position of <m>p</m>.
          </p>
        </li>
        <li>
          <p>
            Replace <m>p</m> by <m>1/p</m>.
          </p>
        </li>
        <li>
          <p>
            Replace each entry <m>s</m> in the same row as <m>p</m> (but not <m>p</m>) with <m>s/p</m>.
          </p>
        </li>
        <li>
          <p>
            Replace each entry <m>r</m> in the same column as <m>p</m> (but not <m>p</m>) with <m>-r/p</m>.
          </p>
        </li>
        <li>
          <p>
            Each entry <m>q</m> not in the same row or column as <m>p</m> but in the same column as <m>s</m> (which is in the same row as <m>p</m>) and in the same row as <m>r</m> (which is in the same column as <m>p</m>)
            is replaced with <m>\frac{pq-rs}{p}</m>.
          </p>
        </li>

      </ol>
    </statement>
  </definition>

  <activity xml:id="activity-pivotexample">
    <introduction>
      <statement>
        <p>
          Consider the problem: maximize <m>f(x,y)=5x-y</m> subject to:
          <md>
            <mrow>-7x+y \amp \leq 0</mrow>
            <mrow>-x+2y \amp \leq 30</mrow>
            <mrow>-x-2y \amp \leq 0</mrow>
            <mrow>-3x-y \amp \leq 20</mrow>
            <mrow>-x,y \amp \geq 0</mrow>
            <!-- 
            TYPO
            Add x, y>=0
            Fixed
            -->
          </md>
          which we may encode as:
         
        </p>
        <p>
          <tabular halign="center">
            <row>
              <cell halign="left">
              </cell>
              <cell bottom="medium">
                <m>x_1</m>
              </cell>
              <cell bottom="medium">
                <m>x_2</m>
              </cell>
              <cell bottom="medium">
                <m>-1</m>
              </cell>
              <cell halign="left">
              </cell>
            </row>
            <row>
              <cell halign="left" right="medium">
              </cell>
              <cell>
                <m>-7  </m>
              </cell>
              <cell right="medium">
                <m> 1 </m>
              </cell>
              <cell right="medium">
                <m> 0</m>
              </cell>
              <cell halign="left">
                <m>=-t_1</m>
              </cell>
            </row>
            <row>
              <cell halign="left" right="medium">
              </cell>
              <cell>
                <m> 1 </m>
              </cell>
              <cell right="medium">
                <m> 2 </m>
              </cell>
              <cell right="medium">
                <m> 30 </m>
              </cell>
              <cell halign="left">
                <m>=-t_2</m>
              </cell>
            </row>
            <row>
              <cell halign="left" right="medium">
              </cell>
              <cell>
                <m> 1 </m>
              </cell>
              <cell right="medium">
                <m> -2 </m>
              </cell>
              <cell right="medium">
                <m> 0 </m>
              </cell>
              <cell halign="left">
                <m>=-t_3</m>
              </cell>
            </row>
            <row>
              <cell halign="left" right="medium">
              </cell>
              <cell bottom="medium">
                <m>  3 </m>
              </cell>
              <cell right="medium" bottom="medium">
                <m> -1 </m>
              </cell>
              <cell right="medium" bottom="medium">
                <m> 20</m>
              </cell>
              <cell halign="left">
                <m>=-t_4</m>
              </cell>
            </row>
            <row>
              <cell halign="left" right="medium">
              </cell>
              <cell bottom="medium">
                <m> 5 </m>
              </cell>
              <cell right="medium" bottom="medium">
                <m> -1 </m>
              </cell>
              <cell right="medium" bottom="medium">
                <m> 0 </m>
              </cell>
              <cell halign="left">
                <m>=f</m>
              </cell>
            </row>
          </tabular>
        </p>
      </statement>
    </introduction>
    <task>
      <statement>
        <p>
          Pivot on the entry with <m>*</m>
          
           (Keep track of the decision and slack variables.)
        </p>
        <p>
          <tabular halign="center">
            <row>
              <cell halign="left">
              </cell>
              <cell bottom="medium">
                <m>x_1</m>
              </cell>
              <cell bottom="medium">
                <m>x_2</m>
              </cell>
              <cell bottom="medium">
                <m>-1</m>
              </cell>
              <cell halign="left">
              </cell>
            </row>
            <row>
              <cell halign="left" right="medium">
              </cell>
              <cell>
                <m>-7  </m>
              </cell>
              <cell right="medium">
                <m> 1 </m>
              </cell>
              <cell right="medium">
                <m> 0</m>
              </cell>
              <cell halign="left">
                <m>=-t_1</m>
              </cell>
            </row>
            <row>
              <cell halign="left" right="medium">
              </cell>
              <cell>
                <m> 1 </m>
              </cell>
              <cell right="medium">
                <m> 2 </m>
              </cell>
              <cell right="medium">
                <m> 30 </m>
              </cell>
              <cell halign="left">
                <m>=-t_2</m>
              </cell>
            </row>
            <row>
              <cell halign="left" right="medium">
              </cell>
              <cell>
                <m> 1^* </m>
              </cell>
              <cell right="medium">
                <m> -2 </m>
              </cell>
              <cell right="medium">
                <m> 0 </m>
              </cell>
              <cell halign="left">
                <m>=-t_3</m>
              </cell>
            </row>
            <row>
              <cell halign="left" right="medium">
              </cell>
              <cell bottom="medium">
                <m>  3 </m>
              </cell>
              <cell right="medium" bottom="medium">
                <m> -1 </m>
              </cell>
              <cell right="medium" bottom="medium">
                <m> 20</m>
              </cell>
              <cell halign="left">
                <m>=-t_4</m>
              </cell>
            </row>
            <row>
              <cell halign="left" right="medium">
              </cell>
              <cell bottom="medium">
                <m> 5 </m>
              </cell>
              <cell right="medium" bottom="medium">
                <m> -1 </m>
              </cell>
              <cell right="medium" bottom="medium">
                <m> 0 </m>
              </cell>
              <cell halign="left">
                <m>=f</m>
              </cell>
            </row>
          </tabular>
        </p>
      </statement>
    </task>
    <task>
      <statement>
        <p>
          Pivot on the entry with <m>*</m> (Keep track of the decision and slack variables.)
          
           
        </p>
        <p>
          <tabular halign="center">
            <row>
              <cell halign="left">
              </cell>
              <cell bottom="medium">
                <m>?</m>
              </cell>
              <cell bottom="medium">
                <m>?</m>
              </cell>
              <cell bottom="medium">
                <m>-1</m>
              </cell>
              <cell halign="left">
              </cell>
            </row>
            <row>
              <cell halign="left" right="medium">
              </cell>
              <cell>
                <m>?  </m>
              </cell>
              <cell right="medium">
                <m> ? </m>
              </cell>
              <cell right="medium">
                <m> ?</m>
              </cell>
              <cell halign="left">
                <m>=-?</m>
              </cell>
            </row>
            <row>
              <cell halign="left" right="medium">
              </cell>
              <cell>
                <m> ? </m>
              </cell>
              <cell right="medium">
                <m> ? </m>
              </cell>
              <cell right="medium">
                <m> ? </m>
              </cell>
              <cell halign="left">
                <m>=-? </m>
              </cell>
            </row>
            <row>
              <cell halign="left" right="medium">
              </cell>
              <cell>
                <m> ? </m>
              </cell>
              <cell right="medium">
                <m> ? </m>
              </cell>
              <cell right="medium">
                <m> ? </m>
              </cell>
              <cell halign="left">
                <m>=-? </m>
              </cell>
            </row>
            <row>
              <cell halign="left" right="medium">
              </cell>
              <cell bottom="medium">
                <m>  ? </m>
              </cell>
              <cell right="medium" bottom="medium">
                <m> ?^* </m>
              </cell>
              <cell right="medium" bottom="medium">
                <m> ?</m>
              </cell>
              <cell halign="left">
                <m>=-?</m>
              </cell>
            </row>
            <row>
              <cell halign="left" right="medium">
              </cell>
              <cell bottom="medium">
                <m> ? </m>
              </cell>
              <cell right="medium" bottom="medium">
                <m> ? </m>
              </cell>
              <cell right="medium" bottom="medium">
                <m> ? </m>
              </cell>
              <cell halign="left">
                <m>=f</m>
              </cell>
            </row>
          </tabular>
        </p>
      </statement>
    </task>
    <task>
      <statement>
        <p>
          Pivot on the entry with <m>*</m> (Keep track of the decision and slack variables.)
        </p>
        <p>
          <tabular halign="center">
            <row>
              <cell halign="left">
              </cell>
              <cell bottom="medium">
                <m>?</m>
              </cell>
              <cell bottom="medium">
                <m>?</m>
              </cell>
              <cell bottom="medium">
                <m>-1</m>
              </cell>
              <cell halign="left">
              </cell>
            </row>
            <row>
              <cell halign="left" right="medium">
              </cell>
              <cell>
                <m>?  </m>
              </cell>
              <cell right="medium">
                <m> ? </m>
              </cell>
              <cell right="medium">
                <m> ?</m>
              </cell>
              <cell halign="left">
                <m>=-? </m>
              </cell>
            </row>
            <row>
              <cell halign="left" right="medium">
              </cell>
              <cell>
                <!-- 
                TYPO
                * should be below
                Fixed
                -->
                <m> ?^* </m>
              </cell>
              <cell right="medium">
                <m> ? </m>
              </cell>
              <cell right="medium">
                <m> ? </m>
              </cell>
              <cell halign="left">
                <m> =-?</m>
              </cell>
            </row>
            <row>
              <cell halign="left" right="medium">
              </cell>
              <cell>
                <m> ? </m>
              </cell>
              <cell right="medium">
                <m> ? </m>
              </cell>
              <cell right="medium">
                <m> ? </m>
              </cell>
              <cell halign="left">
                <m>=-? </m>
              </cell>
            </row>
            <row>
              <cell halign="left" right="medium">
              </cell>
              <cell bottom="medium">
                <m>  ? </m>
              </cell>
              <cell right="medium" bottom="medium">
                <m> ? </m>
              </cell>
              <cell right="medium" bottom="medium">
                <m> ?</m>
              </cell>
              <cell halign="left">
                <m>=-?</m>
              </cell>
            </row>
            <row>
              <cell halign="left" right="medium">
              </cell>
              <cell bottom="medium">
                <m> ? </m>
              </cell>
              <cell right="medium" bottom="medium">
                <m> ? </m>
              </cell>
              <cell right="medium" bottom="medium">
                <m> ? </m>
              </cell>
              <cell halign="left">
                <m>=f</m>
              </cell>
            </row>
          </tabular>
        </p>
      </statement>
    </task>
    <task>
      <statement>
        <p>
          Look at your decision variables.  Which two lines are we currently sitting on?
        </p>
      </statement>
    </task>
    <task>
      <statement>
        <p>
          How do we know the basic solution we now have is an optimal solution?
        </p>
      </statement>
     
    </task>
    
    <task>
      <statement>
        <p>
          Confirm your solution geometrically:
          <interactive  platform="doenetml" width="100%" >
            <slate surface="doenetml">
              <xi:include parse="text" href="doenet/simplex-multipleintersections.xml"/>
            </slate>
          </interactive>
        </p>
      </statement>
      
    </task>

  </activity>

  <remark>
    <p>
      One may observe, this pivot operation is not difficult,
      but rather tedious, and it is easy to make a minor error that derails this process.
      Doing multiple pivots in a row compounds this issue.  It is like a more tedious version of
      row reduction and Gaussian elimination.  Thus an interactive pivoter
      has been provided in <xref ref="simplexpivoter"/>.  Hopefully this improves everyone's lives.
    </p>
  </remark>

  
  
  
    
  
    <activity xml:id="activity-insurance">
      <introduction>
        <p>
          Suppose a company produces two types of widgets.  Widget 1 sells for $200 and Widget 2 sells for $150.
          Each widget takes ingredients A, B and C.  Widget 1 needs 1 unit of A, 2 units of B and 2 units of C.  Widget 2 needs 2 units of A, 2 units of B and 1 unit of C.
          The company has 20 units of ingredient A, 30 units of B and 25 units of C.
        </p>
        <p>
          Now, the company wants to assign values <m>y_A, y_B, y_C</m> to the three ingredients.  The values for each should be enough so that in a disaster, the potential revenue is recovered, i.e.:
          <md>
            <mrow>y_A +2y_B+2y_C \amp \geq 200 </mrow>
            <mrow>2y_A +2y_B+y_C \amp \geq 150 </mrow>
          </md>
          Of course, the values shouldn't be negative, so <m>y_A, y_B, y_C\geq 0</m>.
          But, the higher we value the ingredients, the greater the insurance premiums will be, so we need to minimize <m>g(y_A, y_B, y_C)=20y_A+30y_B+25y_C</m>.
        </p>
        <p>
          We can convert this into a max problem to solve, but we can also record it in the following tableau:
          
        </p>
        <p>
          <tabular halign="center">
            <row>
              <cell halign="right">
              </cell>
              <cell halign="left" bottom="medium">
              </cell>
              <cell halign="left" bottom="medium">
              </cell>
              <cell halign="left" bottom="medium">
              </cell>
            </row>
            <row>
              <cell halign="right" right="medium">
                <m>y_A</m>
              </cell>
              <cell>
                <m>1</m>
              </cell>
              <cell right="medium">
                <m>2</m>
              </cell>
              <cell right="medium">
                <m>20</m>
              </cell>
            </row>
            <row>
              <cell halign="right" right="medium">
                <m>y_B</m>
              </cell>
              <cell>
                <m>2</m>
              </cell>
              <cell right="medium">
                <m>2</m>
              </cell>
              <cell right="medium">
                <m>30</m>
              </cell>
            </row>
            <row>
              <cell halign="right" right="medium">
                <m>y_C</m>
              </cell>
              <cell bottom="medium">
                <m>2</m>
              </cell>
              <cell right="medium" bottom="medium">
                <m>1</m>
              </cell>
              <cell right="medium" bottom="medium">
                <m>25</m>
              </cell>
            </row>
            <row>
              <cell halign="right" right="medium">
                <m>-1</m>
              </cell>
              <cell bottom="medium">
                <m>200</m>
              </cell>
              <cell right="medium" bottom="medium">
                <m>150</m>
              </cell>
              <cell right="medium" bottom="medium">
                <m>0</m>
              </cell>
            </row>
            <row>
              <cell halign="left">
              </cell>
              <cell>
                <m>=s_1</m>
              </cell>
              <cell>
                <m>=s_2</m>
              </cell>
              <cell>
                <m>=g</m>
              </cell>
            </row>
          </tabular>
        </p>
  
      </introduction>

      <task>
        <statement>
          <p>
            For each column <m>i</m>, consider the equality recorded by this tableau: <m>a_{1i}y_A + a_{2i}y_B+a_{3i}y_C + (-1)c_i=s_i</m>.
            What must be true about <m>s_i</m> in order for <m>a_{1i}y_A + a_{2i}y_B+a_{3i}y_C \geq c_i</m>?
            <ol  marker="A." cols="2">
              <li>
                <p>
                  <m>s_i\geq 0 </m>.
                </p>
              </li>
              <li>
                <p>
                  <m>s_i\leq 0 </m>.
                </p>
              </li>
              <li>
                <p>
                  <m>s_i= 0 </m>.
                </p>
              </li>
              <li>
                <p>
                  Nothing may be determined about <m>s_i</m>.
                </p>
              </li>
            </ol>
          </p>
        </statement>
      </task>


      <task>
        <statement>
         
          <p>
            Pivot on the entry with the <m>*</m>:
            <tabular halign="center">
              <row>
                <cell halign="right">
                </cell>
                <cell halign="left" bottom="medium">
                </cell>
                <cell halign="left" bottom="medium">
                </cell>
                <cell halign="left" bottom="medium">
                </cell>
              </row>
              <row>
                <cell halign="right" right="medium">
                  <m>y_A</m>
                </cell>
                <cell>
                  <m>1</m>
                </cell>
                <cell right="medium">
                  <m>2</m>
                </cell>
                <cell right="medium">
                  <m>20</m>
                </cell>
              </row>
              <row>
                <cell halign="right" right="medium">
                  <m>y_B</m>
                </cell>
                <cell>
                  <m>2</m>
                </cell>
                <cell right="medium">
                  <m>2</m>
                </cell>
                <cell right="medium">
                  <m>30</m>
                </cell>
              </row>
              <row>
                <cell halign="right" right="medium">
                  <m>y_C</m>
                </cell>
                <cell bottom="medium">
                  <m>2^*</m>
                </cell>
                <cell right="medium" bottom="medium">
                  <m>1</m>
                </cell>
                <cell right="medium" bottom="medium">
                  <m>25</m>
                </cell>
              </row>
              <row>
                <cell halign="right" right="medium">
                  <m>-1</m>
                </cell>
                <cell bottom="medium">
                  <m>200</m>
                </cell>
                <cell right="medium" bottom="medium">
                  <m>150</m>
                </cell>
                <cell right="medium" bottom="medium">
                  <m>0</m>
                </cell>
              </row>
              <row>
                <cell halign="left">
                </cell>
                <cell>
                  <m>=s_1</m>
                </cell>
                <cell>
                  <m>=s_2</m>
                </cell>
                <cell>
                  <m>=g</m>
                </cell>
              </row>
            </tabular>
          </p>
        </statement>
      </task>
      <task>
        <statement>
          <p>
            Pivot on the entry with the <m>*</m>:
            
          </p>
  
          <p>
            <tabular halign="center">
              <row>
                <cell halign="right">
                </cell>
                <cell halign="left" bottom="medium">
                </cell>
                <cell halign="left" bottom="medium">
                </cell>
                <cell halign="left" bottom="medium">
                </cell>
              </row>
              <row>
                <cell halign="right" right="medium">
                  <m>y_A</m>
                </cell>
                <cell>
                  <m>?</m>
                </cell>
                <cell right="medium">
                  <m>?</m>
                </cell>
                <cell right="medium">
                  <m>?</m>
                </cell>
              </row>
              <row>
                <cell halign="right" right="medium">
                  <m>y_B</m>
                </cell>
                <cell>
                  <m>?</m>
                </cell>
                <cell right="medium">
                  <m>?^*</m>
                </cell>
                <cell right="medium">
                  <m>?</m>
                </cell>
              </row>
              <row>
                <cell halign="right" right="medium">
                  <m>s_1</m>
                </cell>
                <cell bottom="medium">
                  <m>?</m>
                </cell>
                <cell right="medium" bottom="medium">
                  <m>?</m>
                </cell>
                <cell right="medium" bottom="medium">
                  <m>?</m>
                </cell>
              </row>
              <row>
                <cell halign="right" right="medium">
                  -1
                </cell>
                <cell bottom="medium">
                  <m>?</m>
                </cell>
                <cell right="medium" bottom="medium">
                  <m>?</m>
                </cell>
                <cell right="medium" bottom="medium">
                  <m>0</m>
                </cell>
              </row>
              <row>
                <cell halign="left">
                </cell>
                <cell>
                  <m>=y_C</m>
                </cell>
                <cell>
                  <m>=s_2</m>
                </cell>
                <cell>
                  <m>=g</m>
                </cell>
              </row>
            </tabular>
          </p>
        </statement>
      </task>
  
      <task>
        <statement>
          <p>
            Compare this basic solution and tableau to the final solution in <xref ref="activity-widget"/>. What do you notice?
          </p>
          <interactive iframe="https://www.desmos.com/3d/z4fjuixofk" width="100%" />
        </statement>
         
      </task>
  
  
    </activity>
  
    <p>
      
    </p>
  

</section>